<%= render_state({:name => @song.name, :description => @song.description, :url => "/song/#{@song.id}", :context_menu => "/song/#{@song.id}/context_menu"}) %>

<%= vspace 10 %>
<div class='song-page song'>
  <div class='image'>
    <img src='<%= @song.song_picture_url %>' width='78px' height='78px'>
  </div>
  <div class='content'>
    <div class='name'><%= @song.name %></div>
    <div class='artist'><%= @song.creator.name %></div>
    <div class='play-waveform'>
      <div class='play'><img src='/new-ui/play.png'></div>
      <div class='waveform'><img src='/new-ui/waveform.png'></div>
    </div>
  </div>
</div>

<%= vspace 30 %>
<div class='section-header'>Information</div>
<div class='field'>Name:</div><span><%= @song.name %></span><%= vspace %>
<div class='field'>Artists:</div><span><%= @song.artists.map(&:username).join(", ") %></span><%= vspace %>
<div class='field'>Instruments:</div><span><%= @song.instruments.map(&:name).join(", ") %></span><%= vspace %>
<div class='field'>Genre:</div><span><%= @song.genre_names %></span><%= vspace  %>
<% file_data = @song.file_data  %>
<% if file_data %>
  <div class='field'>Length:</div><%= file_data.length.to_time_str %> <%= vspace %>
  <div class='field'>Mode:</div><%= file_data.mode %> <%= vspace %>
  <div class='field'>Sample Rate:</div><%= file_data.samplerate %> Hz<%= vspace %>
  <div class='field'>Bit Rate:</div><%= file_data.bitrate %> kbps<%= vspace %>
  <div class='field'>File Size:</div><%= file_data.filesize.to_mb %><%= vspace %>
<% else %>
  This information is available only to Published Songs.
<% end %>

<%= vspace 30 %>
<div class='section-header'>Jams</div>
<%= partial :"/song/jams", :locals => {:jams => @song.jams} %>


<%= vspace 20 %>
<div class='section-header'>Comments</div>
<div id='song-comments'>
	<%= partial(:'common/comments', {
		:locals => {
			:comments => @song.comments, 
			:for_type => 'song', 
			:for_type_id => @song.id,
			:managers => @song.artists
			}
		}
	)%>
</div>